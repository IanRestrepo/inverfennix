---
	import MainLayout from "../layouts/MainLayout.astro";
	import Card from "../components/Cards/Card.astro";
	import ProductPage from "../layouts/ProductPage.astro";

	 const response = await fetch('https://inverfennix-dashboard.up.railway.app/api/products?populate=*').then(res => res.json())


	const products = await response.data
---
<MainLayout siteName="Home - Inverfennix">
	<div class="flex flex-wrap justify-center">
		{
			products.map(({attributes: {name, model, year, onSale, slug}}) => {
				return( 
				<Card 
				productTitle={name}
				productModel={model}
				productYear={year}
				productOnSale={onSale}
				productPage={slug}
				/>
			)})
		}
	</div>
</MainLayout>